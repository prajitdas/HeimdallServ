function showDistance(t,a,i){data=[],url="getdistances.php?app1="+t.replace()+"&app2="+a.replace(/-/g,".")+"&app3="+i.replace(/-/g,"."),d3.json(url).post(data,function(t,a){var i=a.fbdist,d=a.flightdist,e=i/(i+d),r=paddingw+Math.floor(e*dwidth);d3.select("#appslider").attr("transform","translate("+r+","+Math.floor(dheight/2)+")").select("text").text(100-Math.floor(100*e))})}var radius=15,dwidth=$("#dangerbar")[0].width.baseVal.value-2*radius,dheight=$("#dangersvg").height(),paddingw=Math.floor(($("#dangersvg").width()-dwidth-2*radius)/2)+radius;$("#showdistance").click(function(){showDistance(appID,MAL_NODE.attr("id"),BEN_NODE.attr("id")),$("#dangercontainer").attr("style","visibility:visible")});